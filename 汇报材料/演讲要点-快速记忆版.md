# 演讲要点 - 快速记忆版（逻辑顺序版：5分50秒）

## 🎯 汇报结构

```
开场(10s) → 整体流程(40s) → 工具实现(80s) → Agent搭建(70s) → Agent运行(90s) → 前端(40s) → 结尾(20s)
= 350秒 = 5分50秒
```

**逻辑顺序：**
1. 整体流程（先看全貌）
2. 工具实现（基础，Agent依赖它）
3. Agent搭建（如何初始化）
4. Agent运行（如何使用工具和提示词）
5. 前端展示（简单带过）

---

## 📝 逐页要点

### 1️⃣ 开场（10秒）

**说什么：**
> "大家好！今天介绍基于 LangChain 的智能股票分析 Agent。它能**自主调用工具、多轮推理、输出专业分析**。按照**从整体到局部、从工具到Agent**的逻辑顺序讲解。"

**关键词：** 自主、多轮、逻辑顺序

---

### 2️⃣ 整体流程（40秒）

**说什么：**
> "先看系统架构和整体流程。"
> 
> "系统分三层：**展示层**（Streamlit UI），**Agent层**（LangChain，核心），**工具层**（5个工具+AkShare数据）。"
> 
> "完整流程：**用户查询** → **Streamlit UI** → **Agent 初始化**（绑定工具+提示词）→ **Agent 循环执行**（ReAct模式）→ **工具调用**（获取真实数据）→ **数据返回** → **AI 分析** → **输出报告**。"
> 
> "核心思想：**Agent 作为'大脑'，工具作为'手脚'，协同完成分析任务**。"

**关键词：** 三层、完整流程、大脑+手脚

**手势：** 
- 从上到下指三层
- 从左到右指流程

---

### 3️⃣ 工具实现（80秒）⭐⭐⭐

**说什么：**
> "接下来看工具是怎么实现的。这是整个系统的基础。"
> 
> "看完整例子：**get_stock_history 函数**。"
> 
> 五步：
> 1. "**@tool 装饰器** - 自动变成工具，LangChain 读 docstring 生成描述"
> 2. "调用 AkShare API - 获取A股历史数据（最近30天）"
> 3. "数据清洗 - 只保留关键字段，取最近10天"
> 4. "返回 Markdown 表格 - LLM 理解能力强"
> 5. "错误处理 - 工具失败返回错误信息，不崩溃"
> 
> "我们实现了 5 个工具："
> 1. "get_stock_history - 历史行情"
> 2. "get_stock_news - 最新新闻"
> 3. "get_stock_technical_indicators - 技术指标"
> 4. "get_industry_comparison - 行业对比"
> 5. "analyze_stock_comprehensive - 综合分析"
> 
> "**一个函数 + 一个装饰器 = 一个 Agent 工具**，就这么简单！"

**关键词：** @tool、AkShare、Markdown、5个工具

**手势：** 
- 数五步时伸手指
- 强调"就这么简单"时摊手

**时间分配：**
- 代码讲解：50秒
- 工具列表：20秒
- 关键点总结：10秒

---

### 4️⃣ Agent搭建（70秒）⭐⭐⭐

**说什么：**
> "有了工具，接下来看 Agent 是怎么搭建的。"
> 
> "**StockAnalysisAgent 类**的完整初始化过程："
> 
> 五步：
> 1. "初始化 LLM - 用 ChatOpenAI，temperature=0.7"
> 2. "准备工具 - 5个工具放进列表，创建 tool_map"
> 3. "**bind_tools 关键操作** - 让 LLM 知道'我有这些工具可用'，自动生成工具调用格式"
> 4. "构建 Prompt - 系统提示词+消息占位符"
> 5. "创建 Agent Runnable - `prompt | llm_with_tools` 形成可执行的 Agent"
> 
> "核心思想：**让 LLM 不仅会聊天，还会主动使用工具获取真实数据**。"

**关键词：** bind_tools（强调）、Prompt、Runnable链

**手势：** 数五步时伸手指

**时间分配：**
- 代码讲解：55秒
- 关键点总结：15秒

---

### 5️⃣ Agent运行（90秒）⭐⭐⭐

**说什么：**
> "有了搭建好的 Agent，接下来看它怎么运行。"
> 
> "**_run_loop 递归函数，ReAct 模式**。"
> 
> "ReAct = **推理 → 行动 → 观察**，循环执行。"
> 
> 七步：
> 1. "检查最大迭代次数 - 防止无限循环"
> 2. "调用 LLM - 让它思考"
> 3. "检查 tool_calls - 它想调工具吗？"
> 4. "执行工具 - 获取数据，包装成 ToolMessage"
> 5. "错误处理 - 工具失败返回错误信息"
> 6. "更新消息历史 - LLM输出+工具结果"
> 7. "递归调用 - 带上数据再问 LLM"
> 
> "循环多次，直到 LLM 给出最终答案。"
> 
> "举个例子：查询'分析贵州茅台（600519）的走势'"
> 
> "**第1轮：** LLM 调用 get_stock_history → 获取价格数据"
> "**第2轮：** LLM 调用 get_stock_technical_indicators → 获取技术指标"
> "**第3轮：** LLM 综合分析 → 输出专业报告"
> 
> "**Agent的大脑：自己决定调哪些工具、调几次、何时停止**。"

**关键词：** ReAct、递归、消息历史、自主决策

**手势：** 
- 循环手势（画圈）
- 数三轮时伸手指

**时间分配：**
- 代码讲解：60秒
- 流程示例：25秒
- 关键点总结：5秒

---

### 6️⃣ 前端展示（40秒）

**说什么：**
> "最后简单看一下前端界面。"
> 
> "用 Streamlit 搭建 Web UI："
> 
> 1. "侧边栏 - 用户输入 API 密钥、地址、模型"
> 2. "主界面 - 用户输入查询，点击'开始分析'"
> 3. "执行过程 - 初始化 Agent，显示加载动画"
> 4. "结果显示 - 显示分析结果和步骤数"
> 
> "特点：简洁美观、API配置、实时反馈、历史记录"
> 
> "部署：Streamlit Cloud 一键部署，永久链接，公开分享"

**关键词：** Streamlit、API配置、一键部署

**手势：** 快速数四点

---

### 7️⃣ 结尾（20秒）

**说什么：**
> "总结四个创新点：**自主决策、多轮推理、专业输出、易于部署**。"
> 
> "**技术栈：** LangChain + AkShare + Streamlit"
> 
> "**700行代码，5个工具，完整Agent + Web UI**。"
> 
> "**汇报完毕，谢谢！**"

**关键词：** 四创新、技术栈、700行

**手势：** 鞠躬

---

## 🔥 关键代码片段（必须能流畅解释）

### 代码1：@tool装饰器（工具实现）

```python
@tool
def get_stock_history(symbol: str) -> str:
    """获取中国A股股票的近期历史行情数据。"""
    df = ak.stock_zh_a_hist(...)
    return df.to_markdown()
```

**解释：** "加个装饰器，函数自动变工具。LangChain读文档字符串生成工具描述。"

---

### 代码2：bind_tools（Agent搭建）

```python
self.llm_with_tools = self.llm.bind_tools(self.tools)
```

**解释：** "这行代码把工具绑定到LLM，让它知道'我现在有这些工具可用'，自动生成工具调用格式。"

---

### 代码3：递归循环（Agent运行）

```python
llm_output = self.agent_runnable.invoke(input_dict)

if not llm_output.tool_calls:
    return llm_output.content  # 结束

# 执行工具调用
tool_output = self.tool_map[tool_name].invoke(tool_args)
tool_messages.append(ToolMessage(...))

# 递归
return self._run_loop(new_input_with_tool_results, iteration+1)
```

**解释：** "调用LLM，检查要不要工具，执行工具，递归调用。循环直到得出结论。"

---

## 💡 万能应答

### 如果忘词了

> "这部分的核心是...(看PPT)...它通过...(指代码)...实现了...(说功能)"

### 如果被问住了

> "这是个好问题。从技术角度来说...（拖延思考）...在我们的实现中...（看代码）...具体来说就是..."

### 如果时间不够

**优先保留：**
- ✅ 工具实现（80s → 60s，只讲一个完整例子）
- ✅ Agent搭建（70s → 60s，简化代码展示）
- ✅ Agent运行（90s → 70s，简化流程示例）

**可以跳过：**
- 前端展示（40s → 20s，快速带过）

**压缩后总时长：** 约4分30秒

---

## 🎤 演讲技巧

### 语速控制

- **正常语速：** 每分钟 150-180 字
- **技术讲解：** 稍慢，每分钟 120-150 字（代码部分）
- **过渡/总结：** 可快，每分钟 180-200 字

### 停顿位置

- **每段代码后** - 停2秒，让观众消化
- **每页PPT切换后** - 停1秒，让观众适应
- **强调关键词时** - 前后各停0.5秒
- **讲完一个完整概念后** - 停1秒（如"工具实现"讲完后）

### 目光接触

- **70%时间看观众** - 扫视全场，每人停留1-2秒
- **30%时间看PPT/代码** - 解释代码时可以看屏幕

### 手势建议

- **列举要点** - 伸手指数数（1、2、3、4、5）
- **强调流程** - 从左到右划手（表示流程）
- **强调循环** - 画圈手势
- **强调简单** - 摊手+微笑

---

## 📊 时间分配检查表

| 环节 | 时间 | 累计 | 核心内容 |
|------|------|------|---------|
| 开场 | 10s | 10s | 项目介绍 |
| 整体流程 | 40s | 50s | 三层架构+完整流程 |
| 工具实现 | 80s | 130s | ⭐ @tool装饰器 |
| Agent搭建 | 70s | 200s | ⭐ bind_tools |
| Agent运行 | 90s | 290s | ⭐ ReAct循环 |
| 前端展示 | 40s | 330s | Streamlit UI |
| 结尾 | 20s | 350s | 总结 |

**目标：** 350秒 = 5分50秒  
**留余量：** 10秒（提问或临场发挥）  
**总时长：** 5-6分钟

---

## ✅ 汇报前检查清单

### 内容准备

- [ ] 熟读演讲稿2遍以上
- [ ] 能流畅解释3段核心代码（@tool、bind_tools、递归循环）
- [ ] 记住4个创新点（自主决策、多轮推理、专业输出、易部署）
- [ ] 记住5个工具名称
- [ ] 记住完整执行流程（7步）

### PPT准备

- [ ] PPT有7页，内容完整
- [ ] 代码高亮清晰，关键行已高亮
- [ ] 每页有标题，字体够大（>18pt）
- [ ] 流程图清晰（第2页）
- [ ] 代码完整（第3、4、5页）

### 临场准备

- [ ] 提前到场调试设备
- [ ] 测试翻页笔/鼠标
- [ ] 准备一瓶水（润喉）
- [ ] 深呼吸3次（放松）

---

## 🚀 最后的最后

### 核心信息（必须记住）

1. **项目名称：** 智能股票分析 Agent
2. **技术栈：** LangChain + AkShare + Streamlit
3. **核心原理：** ReAct（推理→行动→观察）
4. **关键代码：** @tool装饰器、bind_tools、递归循环
5. **创新点：** 自主决策、多轮推理、专业输出、易部署
6. **逻辑顺序：** 整体流程 → 工具实现 → Agent搭建 → Agent运行 → 前端

### 一句话总结

> "我们用 LangChain 实现了一个能**自主调用5个工具**进行**多轮推理**的股票分析 Agent，**700行代码**实现了**专业分析+Web部署**。"

---

**你可以的！加油！🎉**
